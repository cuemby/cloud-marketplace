# Cuemby defaults for Prometheus on single-node K3s.
# These override the upstream bitnami/prometheus defaults for our environment.

prometheus:
  server:
    replicaCount: 1

    service:
      type: NodePort
      nodePorts:
        http: 30090

    resources:
      requests:
        cpu: 300m
        memory: 512Mi
      limits:
        cpu: "1"
        memory: 2Gi

    persistence:
      enabled: true
      storageClass: local-path
      size: 15Gi

    # Tuned probes for slower VM startup
    startupProbe:
      enabled: true
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 30
      successThreshold: 1
    livenessProbe:
      initialDelaySeconds: 60
      periodSeconds: 15
      timeoutSeconds: 10
      failureThreshold: 6
    readinessProbe:
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 6

  # Disable Alertmanager for single-node marketplace deployment
  alertmanager:
    enabled: false

  # Disable metrics by default
  metrics:
    enabled: false
